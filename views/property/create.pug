extends ../layout
block content


  .row.mb-2.align-items-center.justify-content-between.bg-white.p-2.m-0
    .col-auto
      h1.app-page-title.mb-0 Properties / Create
    .col-auto
      .page-utilities
        .row.g-2.justify-content-start.justify-content-md-end.align-items-center
          .col-auto
            a.btn.app-btn-info(href='')
              i.fa.fa-refresh
              | &nbsp;Reset Page
          .col-auto
            a.btn.app-btn-danger(href='/properties')
              i.fa.fa-chevron-left
              | &nbsp;Return
  
  div.row
    div.col-12.col-md-12
      div.app-card.app-card-settings.shadow-sm.p-4
        -if(errorMessage)
          div.alert.alert-danger(role='alert')=errorMessage
        div.app-card-body
          form(action="" method="POST")
            
            div.row
              div.col-12.col-md-4.mb-2
                label.form-label(for='lang') Language
                select.form-control(name="lang")
                  option(value="", disabled="", selected="") Choose Language
                  each lang in language
                    option(value=lang.value) #{lang.title}
              div.col-12.col-md-4.mb-2
                label.form-label(for='propertyName') Property Name
                input#propertyName.form-control(type='text' name="propertyName" required )
              div.col-12.col-md-4.mb-2
                label.form-label(for='propertyType') Property Type
                select.form-control(name="propertyType")
                  option(value="", disabled="", selected="") Choose Property Type
                  each pType in propertyType
                    option(value=pType.value) #{pType.title}
            div.row
              div.col-12.col-md-4.mb-2
                label.form-label(for='propertyDescription') Property Description
                textarea#propertyDescription.form-control(name="propertyDescription" rows='2' required )
              div.col-12.col-md-4.mb-2
                label.form-label(for='propertyArea') Property Area
                select.form-control(name="propertyArea")
                  option(value="", disabled="", selected="") Choose Property Area
                  each pArea in propertyArea
                    option(value=pArea._id) #{pArea.areaName}
              div.col-12.col-md-4.mb-2
                label.form-label(for='developmentType') Development Type
                select.form-control(name="developmentType")
                  option(value="", disabled="", selected="") Choose Development Type
                  each development in developmentType
                    option(value=development._id) #{development.name}
            div.row
              div.col-12.col-md-4.mb-2
                label.form-label(for='developerType') Developer Type
                select.form-control(name="developerType")
                  option(value="", disabled="", selected="") Choose Developer Type
                  each developer in developerType
                    option(value=developer._id) #{developer.name}
              div.col-12.col-md-4.mb-2
                label.form-label(for='areaSize') Area Size
                input#areaSize.form-control(type='text' name="areaSize" required )
              
              div.col-12.col-md-4.mb-2
                label.form-label(for='completion') Completion
                input#completion.form-control(type='text' name="completion" required )

            div.row
              div.col-12.col-md-12.mb-2
                label.form-label(for='highlights') Highlights
                input#highlights.form-control(type='text' name="highlights" placeholder="Use # after each separate entities." required )
            div.row
              div.col-12.col-md-4.mb-2
                label.form-label(for='amenitiesDescription') Amenities : Description
                textarea#amenitiesDescription.form-control(name="amenities[description]" rows='2' required )
              div.col-12.col-md-8.mb-2
                label.form-label(for='amenitiesFeatures') Amenities : Features
                input#amenitiesFeatures.form-control(type='text' name="amenities[features]" placeholder="Use # after each separate entities." required )
            
            div.row
              div.col-12.col-md-4.mb-2
                label.form-label(for='startingPrice') Starting Price
                input#startingPrice.form-control(type='number' name="startingPrice" required )
              
              div.col-12.col-md-4.mb-2
                label.form-label(for='locDescription') location : Description
                input#locDescription.form-control(type='text' name="location[locDescription]" required )
              
              div.col-12.col-md-4.mb-2
                label.form-label(for='position') location : Position
                input#position.form-control(type='text' name="location[position]" placeholder="Example: 25.2048,55.2708" required )
            
            //- NearBy
            div.row(style="border-bottom: 2px solid #51b37f;")
              div.col-6.col-md-6.mb-2
                label.form-label(for='Nearby') Nearby
              div.col-6.col-md-6.mb-2.text-end
                button.app-btn-primary.btn-sm(type="button" onclick="addMoreNearBy()")
                  i.fa.fa-plus
                  | &nbsp; More

            div.row.nearby-row
              div.row.nearby-list
                div.col-12.col-md-4.mb-2
                  label.form-label(for='nearByTitle') Title
                  input#nearByTitle.form-control(type='text' name="location[nearby][0][title]" required )
                div.col-12.col-md-4.mb-2
                  label.form-label(for='locDescription') Icon
                  input#locDescription.form-control(type='text' name="location[nearby][0][icon]" required )
                div.col-12.col-md-3.mb-2
                  label.form-label(for='position') Position
                  input#position.form-control(type='text' name="location[nearby][0][position]" placeholder="Example: 25.2048,55.2708" required )
                div.col-12.col-md-1.mb-2.text-center
                  label.form-label(for='action') Action
                  br
                  button.app-btn-danger(type="button" onclick="return false" disabled )
                    i.fa.fa-trash
            
            
            //- paymentPlan
            div.row.mt-4(style="border-bottom: 2px solid #51b37f;")
              div.col-6.col-md-6.mb-2
                label.form-label(for='paymentPlan') Payment Plan
              div.col-6.col-md-6.mb-2.text-end
                button.app-btn-primary.btn-sm(type="button" onclick="addMorePaymentPlan()")
                  i.fa.fa-plus
                  | &nbsp; More

            div.row.paymentPlan-row
              div.row.paymentPlan-list
                div.col-12.col-md-3.mb-2
                  label.form-label(for='paymentPlanMilestone') Milestone
                  input.form-control(type='text' name="paymentPlan[0][milestone]")
                div.col-12.col-md-2.mb-2
                  label.form-label(for='paymentPlanInstallment') Installment
                  input.form-control(type='number' name="paymentPlan[0][installment]")
                div.col-12.col-md-2.mb-2
                  label.form-label(for='paymentPlanPercentage') Percentage
                  input.form-control(type='text' name="paymentPlan[0][percentage]")
                div.col-12.col-md-2.mb-2
                  label.form-label(for='paymentPlanDate') Date
                  input.form-control(type='date' name="paymentPlan[0][date]")
                div.col-12.col-md-2.mb-2
                  label.form-label(for='paymentPlanNotes') Notes
                  input.form-control(type='text' name="paymentPlan[0][notes]" )
                div.col-12.col-md-1.mb-2.text-center
                  label.form-label(for='action') Action
                  br
                  button.app-btn-danger(type="button" onclick="return false" disabled )
                    i.fa.fa-trash

            div.row
              div.col-12.col-md-4.mb-2
                label.form-label(for='unitTypeTitle') Unit Type : Title
                input#unitTypeTitle.form-control(type='text' name="unitType[title]")
              div.col-12.col-md-4.mb-2
                label.form-label(for='unitTypeCount') Unit Type : Count
                input#unitTypeCount.form-control(type='text' name="unitType[count]")
              div.col-12.col-md-4.mb-2
                label.form-label(for='unitTypeSize') Unit Type : size
                input#unitTypeSize.form-control(type='text' name="unitType[size]")

            
            div.row
              div.col-12.col-md-12.mb-2
                label.form-label(for='brochure') Brochure
                input#brochure.form-control(type='text' name="brochure" placeholder="PDF brochure path only.")


            //- images : type, metaDescription, path
            div.row(style="border-bottom: 2px solid #51b37f;")
              div.col-6.col-md-6.mb-2
                label.form-label(for='images') Images
              div.col-6.col-md-6.mb-2.text-end
                button.app-btn-primary.btn-sm(type="button" onclick="addMoreImage()")
                  i.fa.fa-plus
                  | &nbsp; More
            div.row.images-row
              div.row.images-list
                div.col-12.col-md-4.mb-2
                  label.form-label(for='imageType') Type
                  input.form-control(type='text' name="images[0][type]" required )
                div.col-12.col-md-4.mb-2
                  label.form-label(for='imageMetaDescription') MetaDescription
                  input.form-control(type='text' name="images[0][metaDescription]" required )
                div.col-12.col-md-3.mb-2
                  label.form-label(for='imagePath') Path
                  input.form-control(type='text' name="images[0][path]" placeholder="JPG/JPEG/PNG image path only." required )
                div.col-12.col-md-1.mb-2.text-center
                  label.form-label(for='action') Action
                  br
                  button.app-btn-danger(type="button" onclick="return false" disabled )
                    i.fa.fa-trash
            
            
            //- video : type, path
            div.row(style="border-bottom: 2px solid #51b37f;")
              div.col-6.col-md-6.mb-2
                label.form-label(for='Videos') Videos
              div.col-6.col-md-6.mb-2.text-end
                button.app-btn-primary.btn-sm(type="button" onclick="addMoreVideo()")
                  i.fa.fa-plus
                  | &nbsp; More
            div.row.video-row
              div.row.video-list
                div.col-12.col-md-6.mb-2
                  label.form-label(for='videoType') Type
                  input.form-control(type='text' name="videos[0][type]" required )
                div.col-12.col-md-5.mb-2
                  label.form-label(for='videoPath') Path
                  input.form-control(type='text' name="videos[0][path]" placeholder="Video path only." required )
                div.col-12.col-md-1.mb-2.text-center
                  label.form-label(for='action') Action
                  br
                  button.app-btn-danger(type="button" onclick="return false" disabled )
                    i.fa.fa-trash


                
            //- submit button
            hr
            button.btn.app-btn-primary(type='submit') Create Property

block script
  script.
    
    let addMoreNearBy;
    let addMorePaymentPlan;
    let addMoreImage;
    let addMoreVideo;

    $(document).ready(function(){
      

      //nearby
      let nearByIndex = 1;
      addMoreNearBy = function(){
        const nearBy_content = '<div class="row nearby-list"><div class="col-12 col-md-4 mb-2"><input class="form-control" type="text" name="location[nearby]['+nearByIndex+'][title]" required=""></div><div class="col-12 col-md-4 mb-2"><input class="form-control" type="text" name="location[nearby]['+nearByIndex+'][icon]" required=""></div><div class="col-12 col-md-3 mb-2"><input class="form-control" type="text" name="location[nearby]['+nearByIndex+'][position]" placeholder="Example: 25.2048,55.2708" required=""></div><div class="col-12 col-md-1 mb-2 text-center"><button class="app-btn-danger" type="button" onclick='+"$(this).closest('div.nearby-list').remove()"+'><i class="fa fa-trash"></i></button></div></div>';
        $('div.nearby-row').append(nearBy_content);
        nearByIndex++;
      }

      //PaymentPlan
      let paymentPlanIndex = 1;
      addMorePaymentPlan = function(){
        const paymentPlan_content = '<div class="row paymentPlan-list"> <div class="col-12 col-md-3 mb-2"><input class="form-control" type="text" name="paymentPlan['+paymentPlanIndex+'][milestone]" /> </div> <div class="col-12 col-md-2 mb-2"><input class="form-control" type="number" name="paymentPlan['+paymentPlanIndex+'][installment]" /> </div> <div class="col-12 col-md-2 mb-2"><input class="form-control" type="text" name="paymentPlan['+paymentPlanIndex+'][percentage]" /> </div> <div class="col-12 col-md-2 mb-2"><input class="form-control" type="date" name="paymentPlan['+paymentPlanIndex+'][date]" /> </div> <div class="col-12 col-md-2 mb-2"><input class="form-control" type="text" name="paymentPlan['+paymentPlanIndex+'][notes]" /> </div> <div class="col-12 col-md-1 mb-2 text-center"><button class="app-btn-danger" type="button" onclick='+"$(this).closest('div.paymentPlan-list').remove()"+'> <i class="fa fa-trash"></i> </button> </div> </div>';
        $('div.paymentPlan-row').append(paymentPlan_content);
        paymentPlanIndex++;
      }


      //Images
      let imageIndex = 1;
      addMoreImage = function(){
        $('div.images-row').append('<div class="row images-list"><div class="col-12 col-md-4 mb-2"><input class="form-control" type="text" name="images['+imageIndex+'][type]" required=""></div><div class="col-12 col-md-4 mb-2"><input class="form-control" type="text"  name="images['+imageIndex+'][metaDescription]" required=""></div><div class="col-12 col-md-3 mb-2"><input class="form-control" type="text" name="images['+imageIndex+'][path]" placeholder="JPG/JPEG/PNG image path only." required="" ></div><div class="col-12 col-md-1 mb-2 text-center"><button class="app-btn-danger" type="button" onclick='+"$(this).closest('div.images-list').remove()"+'><i class="fa fa-trash"></i></button></div></div>');
        imageIndex++;
      }


      //Videos
      let videoIndex = 1;
      addMoreVideo = function(){
        $('div.video-row').append('<div class="row video-list"><div class="col-12 col-md-6 mb-2"><input class="form-control" type="text" name="videos['+videoIndex+'][type]" required=""></div> <div class="col-12 col-md-5 mb-2"><input class="form-control" type="text" name="videos['+videoIndex+'][path]" placeholder="Video path only." required="" ></div><div class="col-12 col-md-1 mb-2 text-center"><button class="app-btn-danger" type="button" onclick='+"$(this).closest('div.video-list').remove()"+'><i class="fa fa-trash"></i></button></div></div>');
        videoIndex++;
      }


    });

    

